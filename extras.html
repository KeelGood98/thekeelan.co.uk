<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Extras • thekeelan.co.uk</title>
<meta name="theme-color" content="#0b0f14" />
<style>
:root{ --text:#e9eef5; --muted:#9aa6b2; --card:#12161b; --border:#1e242c; }
*{box-sizing:border-box}
body{margin:0;color:var(--text);font:14px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
  background:
    linear-gradient(180deg, rgba(0,0,0,.6), rgba(0,0,0,.8)),
    url('https://images.unsplash.com/photo-1517927033932-b3d18e61fb3a?auto=format&fit=crop&w=2400&q=60') center top/cover no-repeat fixed}
.header{display:flex;justify-content:space-between;align-items:center;padding:12px 18px;border-bottom:1px solid var(--border);background:rgba(11,15,20,.6);backdrop-filter:blur(8px)}
a{color:var(--text);text-decoration:none}
.grid{display:grid;gap:18px;padding:12px 18px 24px;grid-template-columns:1fr 1fr}
@media (max-width:1000px){.grid{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px;box-shadow:0 6px 24px rgba(0,0,0,.35)}
.card h2{margin:0 0 8px}
.muted{color:var(--muted)}
.row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.item{display:flex;gap:10px;align-items:center;padding:8px;border:1px solid var(--border);border-radius:10px}
.item img{width:80px;height:40px;object-fit:cover;border-radius:8px}
.badge{padding:0 6px;border:1px solid var(--border);border-radius:8px;margin-left:6px}
</style>
</head>
<body>
<header class="header">
  <div>thekeelan.co.uk</div>
  <nav><a href="/">Football</a></nav>
</header>

<div class="grid">
  <section class="card">
    <h2>Leeds Weather</h2>
    <div id="wx" class="muted">Loading…</div>
  </section>

  <section class="card">
    <h2>Steam Specials</h2>
    <div id="deals" class="muted">Loading…</div>
  </section>
</div>

<script>
(async ()=>{
  const bust = `?t=${Date.now()}`;
  const j = async p => {
    for (const u of [`/assets/${p}`, `assets/${p}`, `./assets/${p}`]) {
      try { const r = await fetch(u + bust, {cache:'no-store'}); if (r.ok) return r.json(); } catch {}
    } return null;
  };

  // Weather
  const wx = await j('weather.json');
  const wxBox = document.getElementById('wx');
  if (!wx) {
    wxBox.textContent = 'No weather right now.';
  } else {
    const c = wx.current || {};
    wxBox.innerHTML = `
      <div class="row">
        <div style="font-size:32px">${Math.round(c.temperature_2m ?? 0)}°C</div>
        <div class="muted">Wind ${Math.round(c.wind_speed_10m ?? 0)} mph</div>
      </div>
    `;
  }

  // Specials
  const sp = await j('specials.json');
  const deals = document.getElementById('deals');
  if (!sp?.specials?.length) {
    deals.textContent = 'No specials right now.';
  } else {
    deals.innerHTML = sp.specials.slice(0,12).map(d => `
      <a class="item" href="${d.url}" target="_blank" rel="noopener">
        <img src="${d.header_image}" alt="">
        <div>
          <div>${d.name}</div>
          <div class="muted">
            £${(d.final_price/100).toFixed(2)}
            <span class="badge">-${d.discount_percent}%</span>
          </div>
        </div>
      </a>
    `).join("");
  }
})();
</script>
</body>
</html>
