<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>thekeelan.co.uk — Extras</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{ --bg:#0c1117; --panel:#121823; --muted:#95a2b3; --text:#e6edf3; --card:16px; }
    *{box-sizing:border-box}
    body{ margin:0; background:#0c1117; color:var(--text); font:14px/1.45 system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif; }
    header{ display:flex; justify-content:space-between; align-items:center; padding:14px 18px; color:#9fb3c8 }
    header .nav a{ display:inline-block; margin-left:8px; padding:6px 12px; border-radius:999px; background:#0b1422; color:#cde3ff; text-decoration:none; border:1px solid #0e2139 }
    header .nav a.active{ background:#0a7cc0; border-color:#0a7cc0; color:#fff }
    .wrap{ max-width:1200px; margin:0 auto; padding:0 18px 28px; display:grid; grid-template-columns: 1.2fr 1fr; gap:18px }
    @media (max-width:1000px){ .wrap{ grid-template-columns:1fr } }
    .card{ background:#121823; border:1px solid #0f2237; border-radius:var(--card); overflow:hidden }
    .card h2{ margin:0; padding:14px 16px; font-size:16px; font-weight:700; border-bottom:1px solid #0f2237 }
    .panel{ padding:12px 14px }
    ul{ margin:0; padding:0; list-style:none }
    li{ padding:10px 8px; border-bottom:1px solid #0f2237 }
    .muted{ color:#95a2b3 }
  </style>
</head>
<body>
  <header>
    <div>thekeelan.co.uk</div>
    <div class="nav">
      <a href="./">Football</a>
      <a class="active" href="./extras.html">Extras</a>
    </div>
  </header>

  <div class="wrap">
    <section class="card">
      <h2>Leeds Weather</h2>
      <div class="panel" id="wx">Loading…</div>
    </section>

    <section class="card">
      <h2>Spotify – My Playlist</h2>
      <div class="panel" style="padding:0">
        <iframe style="border:0; width:100%; height:420px"
          src="https://open.spotify.com/embed/playlist/2Ap76LC4PX2HUyTW2VXe9u?utm_source=generator"
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
      </div>
    </section>

    <section class="card" style="grid-column:1 / -1">
      <h2>Free Steam Games</h2>
      <div class="panel">
        <ul id="games"><li class="muted">Loading…</li></ul>
      </div>
    </section>
  </div>

  <script>
    const BUST = () => `?t=${Date.now()}`;
    async function j(url){ const r=await fetch(url+BUST(),{cache:'no-store'}); if(!r.ok) throw new Error(url); return r.json(); }

    (async ()=>{
      // Weather
      try{
        const wx = await j('/assets/weather.json');
        const el = document.getElementById('wx');
        const fc = (wx.forecast||[]).slice(0,5).map(d => {
          return `<li><strong>${d.day ?? ''}</strong> – ${d.text ?? ''} <span class="muted">(${d.temp ?? ''}°C)</span></li>`;
        }).join('') || '<div class="muted">No forecast.</div>';
        el.innerHTML = `<div style="margin-bottom:8px"><strong>${wx.city ?? 'Leeds'}</strong> — ${wx.now ?? ''}</div><ul>${fc}</ul>`;
      }catch{ document.getElementById('wx').innerHTML = '<span class="muted">No weather data.</span>'; }

      // Free games
      try{
        const games = await j('/assets/free_games.json');
        const ul = document.getElementById('games');
        ul.innerHTML = games.length ? games.map(g => {
          const a = (g.url||'#'); const t = (g.title||'Untitled');
          const s = g.source ? `<span class="muted"> — ${g.source}</span>` : '';
          const until = g.ends ? ` <span class="muted">(ends ${g.ends})</span>` : '';
          return `<li><a href="${a}" target="_blank" rel="noopener">${t}</a>${s}${until}</li>`;
        }).join('') : '<li class="muted">Nothing free right now.</li>';
      }catch{
        document.getElementById('games').innerHTML = '<li class="muted">No free games data.</li>';
      }
    })();
  </script>
</body>
</html>
