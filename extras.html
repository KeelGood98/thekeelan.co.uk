<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>thekeelan.co.uk — Extras</title>
  <style>
    :root{--bg:#0e141b;--panel:#121a23;--border:#1d2835;--muted:#7a8aa0;--text:#e6eef8;--accent:#42a5ff;}
    *{box-sizing:border-box} html,body{margin:0;background:var(--bg);color:var(--text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell}
    a{color:var(--accent);text-decoration:none}
    .wrap{max-width:1280px;margin:0 auto;padding:16px}
    header{display:flex;gap:12px;margin-bottom:12px}
    header .nav a{margin-right:12px;opacity:.9}
    header .nav a.active{font-weight:600}
    .stamp{margin-left:auto;color:var(--muted);font-size:.9rem}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    @media (max-width:1000px){.grid{grid-template-columns:1fr}}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:10px;padding:12px}
    .h{font-weight:700;margin:2px 0 8px 0;font-size:1.05rem}
    .muted{color:var(--muted)}
    .row{display:flex;align-items:center;gap:10px;padding:8px;border-bottom:1px solid var(--border)}
    .row:last-child{border-bottom:none}
    .row img{width:60px;height:30px;object-fit:cover;border-radius:6px;background:#000}
    .btn{display:inline-flex;align-items:center;justify-content:center;height:28px;padding:0 10px;border:1px solid var(--border);border-radius:8px;background:#0d2030;color:#a7d7ff;font-size:.84rem}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="nav">
        <a href="index.html">Football</a>
        <a class="active" href="extras.html">Extras</a>
      </div>
      <div class="stamp" id="updated"></div>
    </header>

    <div class="grid">
      <div class="card">
        <div class="h">Leeds Weather</div>
        <div id="weather" class="muted">Loading…</div>
      </div>

      <div class="card">
        <div class="h">Steam Specials</div>
        <div id="steam"></div>
      </div>
    </div>

    <div class="card" style="margin-top:16px">
      <div class="h">My Spotify Playlist</div>
      <!-- your playlist -->
      <iframe style="border-radius:12px;width:100%;height:380px;border:0;"
        src="https://open.spotify.com/embed/playlist/2Ap76LC4PX2HUyTW2VXe9u?utm_source=generator"
        loading="lazy" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"></iframe>
    </div>
  </div>

  <script>
    async function getJSON(u){const r=await fetch(u); if(!r.ok) throw new Error(u); return r.json();}
    async function getText(u){const r=await fetch(u); if(!r.ok) throw new Error(u); return r.text();}

    async function weather(){
      try{
        const w = await getJSON('assets/weather.json'); // {location, temp_c, wind_mph}
        document.querySelector('#weather').innerHTML =
          `<div style="font-size:2.2rem">${Math.round(w.temp_c)}°C</div>
           <div class="muted">Wind ${Math.round(w.wind_mph)} mph</div>`;
      }catch(e){document.querySelector('#weather').textContent='No weather right now.';}
    }

    async function steam(){
      try{
        const s = await getJSON('assets/steam_specials.json'); // [{title,discount_percent,final_price,header_image,url}]
        const box = document.querySelector('#steam'); box.innerHTML='';
        if(!Array.isArray(s) || s.length===0){ box.innerHTML = '<div class="muted">No specials right now.</div>'; return;}
        s.slice(0,10).forEach(g=>{
          box.insertAdjacentHTML('beforeend', `
            <div class="row">
              <img src="${g.header_image}" alt="">
              <div style="flex:1 1 auto">
                <div><strong>${g.title}</strong></div>
                <div class="muted">${g.discount_percent}% — £${g.final_price}</div>
              </div>
              <a class="btn" href="${g.url}" target="_blank" rel="noopener">View</a>
            </div>
          `);
        });
      }catch(e){document.querySelector('#steam').innerHTML='<div class="muted">No specials right now.</div>';}
    }

    function stamp(){getText('assets/update_stamp.txt').then(t=>{document.getElementById('updated').textContent='Updated: '+t.trim();}).catch(()=>{});}

    stamp(); weather(); steam();
  </script>
</body>
</html>
