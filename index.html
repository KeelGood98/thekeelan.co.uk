<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>thekeelan.co.uk – Fresh Build</title>
  <style>
    :root{--bg:#0b0d10;--card:#12161b;--muted:#96a0ad;--text:#e9eef5;--accent:#6ee7ff;--border:#1e242c}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:linear-gradient(180deg,#0b0d10 0%,#0e1318 100%);color:var(--text);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
    a{color:var(--accent);text-decoration:none}
    .container{max-width:1200px;margin:24px auto;padding:0 16px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    .brand{display:flex;gap:10px;align-items:center}
    .brand-logo{width:32px;height:32px;border-radius:8px;background:radial-gradient(circle at 30% 30%,#6ee7ff,transparent 40%),radial-gradient(circle at 70% 70%,#a78bfa,transparent 40%);box-shadow:0 0 0 1px #2a3340 inset}
    .brand h1{font-size:18px;margin:0}
    .grid{display:grid;grid-template-columns:1fr 1.25fr 1fr;gap:16px;align-items:start}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px;box-shadow:0 6px 24px rgba(0,0,0,.25)}
    .card h2{margin:0 0 8px;font-size:15px}
    .muted{color:var(--muted)}

    /* table styling */
    .table-wrap{max-height:560px;overflow:auto;border-radius:10px;border:1px solid var(--border)}
    table{width:100%;border-collapse:collapse}
    th,td{padding:8px 10px;border-bottom:1px solid var(--border);text-align:center}
    thead th{position:sticky;top:0;background:#0f141a;z-index:1}
    tr:hover td{background:#0f141a}
    .team-cell{display:flex;align-items:center;justify-content:center;gap:8px}
    .badge{width:20px;height:20px;border-radius:50%;background:#223}

    /* result colouring */
    .W{background:#10361f} /* green tint */
    .D{background:#2b2b17} /* amber tint */
    .L{background:#3a1a1a} /* red tint */

    /* iframe */
    iframe{width:100%;min-height:560px;border:0;border-radius:10px}

    /* responsive */
    @media (max-width: 980px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="brand-logo" aria-hidden="true"></div>
        <h1>thekeelan.co.uk</h1>
      </div>
      <div class="muted" id="lastUpdated">Last updated: —</div>
    </header>

    <div class="grid">
      <!-- LEFT: free content area (e.g., GIF) -->
      <section class="card" id="leftCol">
        <h2 id="leftTitle">Left Panel</h2>
        <div id="leftContent" class="muted">Add: small GIF or any widget.</div>
      </section>

      <!-- CENTER: Premier League table -->
      <section class="card" id="centerCol">
        <h2>Premier League Table</h2>
        <div class="table-wrap" id="tableWrap">
          <table>
            <thead>
              <tr>
                <th>#</th><th>Team</th><th>P</th><th>W</th><th>D</th><th>L</th><th>GF</th><th>GA</th><th>GD</th><th>Pts</th>
              </tr>
            </thead>
            <tbody id="tableBody">
              <tr><td colspan="10" class="muted">Waiting for data…</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- RIGHT: MUFC fixtures/results + R6 embed -->
      <section class="card" id="rightCol">
        <h2>Man United – Fixtures & Results</h2>
        <div id="fixturesWrap" class="table-wrap" style="padding:8px;">
          <div class="muted">Waiting for data…</div>
        </div>
        <div class="card" style="margin-top:12px;">
          <h2>R6 Tracker</h2>
          <iframe id="r6Frame" src="about:blank" loading="lazy"></iframe>
        </div>
      </section>
    </div>
  </div>

  <script>
    // minimal boot – we will fill details once you provide the page items
    const bust = `?t=${Date.now()}`;

    function setUpdated(ts){
      const el = document.getElementById('lastUpdated');
      el.textContent = 'Last updated: ' + (ts ? new Date(ts).toLocaleString() : new Date().toLocaleString());
    }

    // placeholders for data-driven renderers – wired but idle until we know sources
    async function safeGet(url){
      try{ const r = await fetch(url + bust, {cache:'no-store'}); if(!r.ok) throw 0; return await r.json(); }catch{ return null; }
    }

    function renderTable(rows){
      const tb = document.getElementById('tableBody');
      if(!rows || !rows.length){ tb.innerHTML = '<tr><td colspan="10" class="muted">No table data.</td></tr>'; return; }
      tb.innerHTML = rows.map(r => `
        <tr>
          <td>${r.pos??''}</td>
          <td>
            <span class="team-cell">
              ${r.badge?`<img class="badge" src="${r.badge}" alt="">`:''}
              ${r.team??''}
            </span>
          </td>
          <td>${r.played??''}</td><td>${r.won??''}</td><td>${r.drawn??''}</td><td>${r.lost??''}</td>
          <td>${r.gf??''}</td><td>${r.ga??''}</td><td>${r.gd??''}</td><td><strong>${r.pts??''}</strong></td>
        </tr>`).join('');
    }

    function renderFixtures(block){
      const wrap = document.getElementById('fixturesWrap');
      if(!block || !Array.isArray(block.matches)) { wrap.innerHTML = '<div class="muted">No fixtures data.</div>'; return; }
      const isFinished = m => (m.status||'').toUpperCase()==='FINISHED';
      const outcomeClass = o => o==='W'?'W':o==='D'?'D':o==='L'?'L':'';
      const upcoming = block.matches.filter(m=>!isFinished(m)).sort((a,b)=>new Date(a.date)-new Date(b.date)).slice(0,6);
      const recent = block.matches.filter(isFinished).sort((a,b)=>new Date(b.date)-new Date(a.date)).slice(0,6);
      const fmt = d => new Date(d).toLocaleString([], {dateStyle:'medium', timeStyle:'short'});

      const up = upcoming.length? `
        <h3 style="margin:8px 0;">Upcoming</h3>
        <table><thead><tr><th>Date</th><th>Comp</th><th>Home</th><th></th><th>Away</th></tr></thead>
        <tbody>
          ${upcoming.map(m=>`<tr><td>${fmt(m.date)}</td><td>${m.comp||''}</td><td>${m.home}</td><td>vs</td><td>${m.away}</td></tr>`).join('')}
        </tbody></table>` : '<div class="muted">No upcoming fixtures.</div>';

      const rec = recent.length? `
        <h3 style="margin:12px 0 6px;">Recent Results</h3>
        <table><thead><tr><th>Date</th><th>Comp</th><th>Home</th><th></th><th>Away</th><th>Score</th></tr></thead>
        <tbody>
          ${recent.map(m=>{
            const sc = m.score?`${m.score.home}–${m.score.away}`:'';
            const oc = m.score?.outcome||'';
            return `<tr class="${outcomeClass(oc)}"><td>${new Date(m.date).toLocaleDateString()}</td><td>${m.comp||''}</td><td>${m.home}</td><td>vs</td><td>${m.away}</td><td><strong>${sc}</strong>${oc?` (${oc})`:''}</td></tr>`;
          }).join('')}
        </tbody></table>` : '';

      wrap.innerHTML = up + rec;
    }

    // Call these later when we know your sources:
    // setUpdated(block.updated)
    // renderTable(table.standings)
    // renderFixtures(fixtures)

    // R6 embed setter – provide a URL and we’ll drop it in.
    window.setR6 = (url) => {
      const f = document.getElementById('r6Frame');
      f.src = url || 'about:blank';
    };
  </script>
</body>
</html>
