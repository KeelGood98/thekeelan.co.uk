<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>thekeelan.co.uk</title><meta name="theme-color" content="#0b0f14"/>
<link rel="icon" type="image/svg+xml" href="/assets/favicon.svg">
<style>
:root{--text:#e9eef5;--muted:#9aa6b2;--card:#12161b;--border:#1e242c}
*{box-sizing:border-box}body{margin:0;color:var(--text);font:14px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
background:linear-gradient(180deg,rgba(0,0,0,.55),rgba(0,0,0,.85)),url('https://images.unsplash.com/photo-1517927033932-b3d18e61fb3a?auto=format&fit=crop&w=2400&q=60') center/cover fixed no-repeat}
header{position:sticky;top:0;display:flex;align-items:center;gap:10px;padding:10px 16px;background:rgba(11,15,20,.6);backdrop-filter:blur(8px);border-bottom:1px solid var(--border);z-index:50}
.muted{color:var(--muted)}.spacer{flex:1}
.grid{display:grid;grid-template-columns:1.1fr 1.6fr 1.2fr;gap:18px;padding:16px}
@media(max-width:1200px){.grid{grid-template-columns:1fr 1fr}}@media(max-width:950px){.grid{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px;box-shadow:0 6px 24px rgba(0,0,0,.35)}
.panel{border:1px solid var(--border);border-radius:10px;overflow:auto}
table{width:100%;border-collapse:collapse}th,td{padding:8px 10px;border-bottom:1px solid var(--border);text-align:center}
thead th{position:sticky;top:0;background:#0f141a}tr:hover td{background:#0f141a}
.team-cell{display:inline-flex;align-items:center;gap:8px}
.badge{width:20px;height:20px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;background:#0f141a;font-weight:700;font-size:11px}
.badge.img{background:none}.badge.initials{border:1px solid #243041;color:#b6c2cf}
.W{background:#10361f}.D{background:#2b2b17}.L{background:#3a1a1a}a.btn{padding:2px 8px;border:1px solid var(--border);border-radius:8px}
</style></head><body>
<header>
  <strong>thekeelan.co.uk</strong>
  <div class="spacer"></div>
  <nav class="muted"><a href="/" class="muted" style="margin-right:10px">Football</a><a href="/extras.html" class="muted">Extras</a></nav>
  <div id="lastUpdated" class="muted" style="margin-left:12px">Last updated: —</div>
</header>

<div class="grid">
  <section class="card">
    <h2>Left Panel</h2>
    <div class="panel" style="overflow:hidden">
      <img src="https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExcThlOWlqcmc5YnZmcTVtaDByZHdpZHd4cWo4YTl0NXB4NGlxNnFlaSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/yRl0DstAx4nN0RjDLV/giphy.gif" alt="" style="display:block;width:100%;height:auto">
    </div>
  </section>

  <section class="card">
    <h2>Premier League Table</h2>
    <div class="panel">
      <table>
        <thead><tr><th>#</th><th>Team</th><th>P</th><th>W</th><th>D</th><th>L</th><th>GF</th><th>GA</th><th>GD</th><th>Pts</th></tr></thead>
        <tbody id="tableBody"><tr><td colspan="10" class="muted">Loading…</td></tr></tbody>
      </table>
    </div>
  </section>

  <section class="card" style="display:flex;flex-direction:column;min-height:420px">
    <h2>Man United – Fixtures & Results</h2>
    <div id="fixturesWrap" class="panel" style="padding:8px;flex:1;min-height:0"><div class="muted">Loading…</div></div>
  </section>
</div>

<script>
(async () => {
  const bust = `?t=${Date.now()}`;
  async function get(p){ for(const u of [`/assets/${p}`,`assets/${p}`,`./assets/${p}`]){ try{const r=await fetch(u+bust,{cache:'no-store'}); if(r.ok) return r.json()}catch{} } return null }
  async function getText(p){ for(const u of [`/assets/${p}`,`assets/${p}`,`./assets/${p}`]){ try{const r=await fetch(u+bust,{cache:'no-store'}); if(r.ok) return r.text()}catch{} } return "" }
  const toHttps = u => (u||"").replace(/^http:\/\//i,"https://"); const norm=s=>(s||"").toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]/g,""); const initials=t=>(t||"").split(/\s+/).map(w=>w[0]).slice(0,2).join('').toUpperCase();

  // last updated
  const stamp = await getText('update_stamp.txt');
  if(stamp) document.getElementById('lastUpdated').textContent = 'Last updated: ' + stamp.trim();

  // table + badges
  const table = await get('table.json'); const badgesFile = await get('badges.json');
  const badges = {}; if(badgesFile?.badges) for(const [k,v] of Object.entries(badgesFile.badges)) badges[norm(k)] = toHttps(v);
  const tb = document.getElementById('tableBody');
  function row(r){ const b = badges[norm(r.team)]; const badge = b ? `<img class="badge img" referrerpolicy="no-referrer" src="${b}" alt="">` : `<span class="badge initials">${initials(r.team)}</span>`;
    return `<tr><td>${r.pos}</td><td><span class="team-cell">${badge}${r.team}</span></td><td>${r.played}</td><td>${r.won}</td><td>${r.drawn}</td><td>${r.lost}</td><td>${r.gf}</td><td>${r.ga}</td><td>${r.gd}</td><td><strong>${r.pts}</strong></td></tr>` }
  tb.innerHTML = table?.standings?.length ? table.standings.map(row).join('') :
    `<tr><td colspan="10" class="muted">⚠️ No table data.</td></tr>`;

  // fixtures (MUFC only)
  const fx = await get('fixtures.json'); const wrap = document.getElementById('fixturesWrap');
  if(!fx?.matches?.length){ wrap.innerHTML = '<div class="muted">⚠️ No fixtures data.</div>'; return; }
  const t = s => new Date(s).getTime()||0; const isFin=m=> (m.status||'').toUpperCase()==='FINISHED' || (m.score&&typeof m.score.home==='number'); 
  const all = fx.matches.slice().sort((a,b)=>t(a.date)-t(b.date));
  const up = all.filter(m=>!isFin(m)).slice(0,8); const re = all.filter(isFin).reverse().slice(0,8);
  const fmtD=d=>new Date(d).toLocaleDateString('en-GB',{day:'2-digit',month:'short',year:'numeric',timeZone:'Europe/London'});
  const fmtT=d=>new Date(d).toLocaleTimeString('en-GB',{hour:'2-digit',minute:'2-digit',hour12:false,timeZone:'Europe/London'});
  const upRow=m=>`<tr><td>${fmtD(m.date)}</td><td>${fmtT(m.date)}</td><td>${m.comp||''}</td><td>${m.home}</td><td>vs</td><td>${m.away}</td><td>${m.tv||'TBD'}</td></tr>`;
  const reRow=m=>{const sc=m.score?`${m.score.home}–${m.score.away}`:'';const oc=m.score?.outcome||'';const cls=oc==='W'?'W':oc==='L'?'L':(oc==='D'?'D':'');
    const y=new Date(m.date).getFullYear();const q=encodeURIComponent(`${m.home} ${m.away} highlights ${y}`);
    return `<tr class="${cls}"><td>${fmtD(m.date)}</td><td>${m.comp||''}</td><td>${m.home}</td><td>vs</td><td>${m.away}</td><td><strong>${sc}</strong>${oc?` (${oc})`:""}</td>
            <td><a class="btn" href="https://www.skysports.com/search?q=${q}" target="_blank" rel="noopener">Sky</a> <a class="btn" href="https://www.youtube.com/results?search_query=${q}" target="_blank" rel="noopener">YT</a></td></tr>`;}
  wrap.innerHTML = `
    <h3 style="margin:8px 0;">Upcoming</h3>
    <table><thead><tr><th>Date (UK)</th><th>Time (UK)</th><th>Comp</th><th>Home</th><th></th><th>Away</th><th>TV</th></tr></thead>
    <tbody>${up.map(upRow).join('') || `<tr><td colspan="7" class="muted">No upcoming fixtures.</td></tr>`}</tbody></table>
    <h3 style="margin:12px 0 6px;">Recent Results</h3>
    <table><thead><tr><th>Date</th><th>Comp</th><th>Home</th><th></th><th>Away</th><th>Score</th><th>Highlights</th></tr></thead>
    <tbody>${re.map(reRow).join('')}</tbody></table>`;
})();
</script>
</body></html>
